p('abcd0').
p('abcd1').
p('abcd2').
p('abcd3').
p('abcd4').
p('abcd5').
p('abcd6').
p('abcd7').
p('abcd8').
p('abcd9').
p('abcd10').
p('abcd11').
p('abcd12').
p('abcd13').
p('abcd14').
p('abcd15').
p('abcd16').
p('abcd17').
p('abcd18').
ra(?A,?B,?C,?D,?E) :- p(?A),p(?B),p(?C),p(?D),p(?E).
rb(?A,?B,?C,?D,?E) :- p(?A),p(?B),p(?C),p(?D),p(?E).
r(?A,?B,?C,?D,?E) :- ra(?A,?B,?C,?D,?E),rb(?A,?B,?C,?D,?E).
q(?A) :- r(?A,?B,?C,?D,?E).
q(?B) :- r(?A,?B,?C,?D,?E).
q(?C) :- r(?A,?B,?C,?D,?E).
q(?D) :- r(?A,?B,?C,?D,?E).
q(?E) :- r(?A,?B,?C,?D,?E).

?- q(?X).