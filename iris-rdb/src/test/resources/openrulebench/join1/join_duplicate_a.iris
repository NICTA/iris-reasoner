p1_a(?X, ?Y)  :- p1_b1(?X, ?Z), p1_b2(?Z, ?Y).
p1_b1(?X, ?Y) :- p1_c1(?X, ?Z), c2(?Z, ?Y).
p1_b2(?X, ?Y) :- c3(?X, ?Z), c4(?Z, ?Y).
p1_c1(?X, ?Y) :- d1(?X, ?Z), d2(?Z, ?Y).
p2_a(?X, ?Y)  :- p2_b1(?X, ?Z), p2_b2(?Z, ?Y).
p2_b1(?X, ?Y) :- p2_c1(?X, ?Z), c2(?Z, ?Y).
p2_b2(?X, ?Y) :- c3(?X, ?Z), c4(?Z, ?Y).
p2_c1(?X, ?Y) :- d1(?X, ?Z), d2(?Z, ?Y).
p3_a(?X, ?Y)  :- p3_b1(?X, ?Z), p3_b2(?Z, ?Y).
p3_b1(?X, ?Y) :- p3_c1(?X, ?Z), c2(?Z, ?Y).
p3_b2(?X, ?Y) :- c3(?X, ?Z), c4(?Z, ?Y).
p3_c1(?X, ?Y) :- d1(?X, ?Z), d2(?Z, ?Y).
p4_a(?X, ?Y)  :- p4_b1(?X, ?Z), p4_b2(?Z, ?Y).
p4_b1(?X, ?Y) :- p4_c1(?X, ?Z), c2(?Z, ?Y).
p4_b2(?X, ?Y) :- c3(?X, ?Z), c4(?Z, ?Y).
p4_c1(?X, ?Y) :- d1(?X, ?Z), d2(?Z, ?Y).
p5_a(?X, ?Y)  :- p5_b1(?X, ?Z), p5_b2(?Z, ?Y).
p5_b1(?X, ?Y) :- p5_c1(?X, ?Z), c2(?Z, ?Y).
p5_b2(?X, ?Y) :- c3(?X, ?Z), c4(?Z, ?Y).
p5_c1(?X, ?Y) :- d1(?X, ?Z), d2(?Z, ?Y).
a(?X, ?Y) :- p1_a(?X, ?Y).
a(?X, ?Y) :- p2_a(?X, ?Y).
a(?X, ?Y) :- p3_a(?X, ?Y).
a(?X, ?Y) :- p4_a(?X, ?Y).
a(?X, ?Y) :- p5_a(?X, ?Y).
b1(?X, ?Y) :- p1_b1(?X, ?Y).
b1(?X, ?Y) :- p2_b1(?X, ?Y).
b1(?X, ?Y) :- p3_b1(?X, ?Y).
b1(?X, ?Y) :- p4_b1(?X, ?Y).
b1(?X, ?Y) :- p5_b1(?X, ?Y).
b2(?X, ?Y) :- p1_b2(?X, ?Y).
b2(?X, ?Y) :- p2_b2(?X, ?Y).
b2(?X, ?Y) :- p3_b2(?X, ?Y).
b2(?X, ?Y) :- p4_b2(?X, ?Y).
b2(?X, ?Y) :- p5_b2(?X, ?Y).

?- a(?X, ?Y).

